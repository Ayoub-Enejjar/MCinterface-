<div class="products">
    <div class="product" *ngFor="let product of products" (click)="openModal(product)">
        <div class="product-image-container">
            <img [src]="product.image" [alt]="product.title" class="product-image">
        </div>
        <div class="product-info">
            <h3>{{ product.title }}</h3>
            <p>{{ product.description }}</p>
            <div class="product-footer">
                <div class="price-section">
                    <span class="price">{{ formatPrice(product.price) }}</span>
                    <span class="ordered-info">{{ formatOrders(product.ordersCount) }}+ ordered</span>
                </div>
                <button class="add-to-cart-btn" (click)="quickAdd(product); $event.stopPropagation()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Enhanced Modal for product details -->
<div class="modal-overlay" *ngIf="isVisible" (click)="close()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="close()">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="modal-body" *ngIf="currentProduct">
            <div class="modal-image-container">
                <img [src]="currentProduct.image" [alt]="currentProduct.title" class="modal-image">
            </div>
            
            <div class="modal-info">
                <h2>{{ currentProduct.title }}</h2>
                <p class="modal-description">{{ currentProduct.description }}</p>
                
                <div class="product-details" *ngIf="currentProduct.calories || currentProduct.prepTime">
                    <span *ngIf="currentProduct.calories" class="detail-item">
                        <i class="fas fa-fire"></i> {{ currentProduct.calories }} cal
                    </span>
                    <span *ngIf="currentProduct.prepTime" class="detail-item">
                        <i class="fas fa-clock"></i> {{ currentProduct.prepTime }} min
                    </span>
                </div>
            </div>

            <div class="quantity-section">
                <div class="quantity-controls">
                    <button class="quantity-btn" (click)="decreaseQuantity()" [disabled]="quantity <= 1">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span class="quantity">{{ quantity }}</span>
                    <button class="quantity-btn" (click)="increaseQuantity()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <button class="modal-add-btn" (click)="addToCart()">
                <i class="fas fa-cart-plus"></i>
                Add to Cart â€¢ {{ formatPrice(currentProduct.price * quantity) }}
            </button>
        </div>
    </div>
</div>